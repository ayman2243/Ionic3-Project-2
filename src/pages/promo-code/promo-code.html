<!--
  Generated template for the PromoCodePage page.

  See http://ionicframework.com/docs/components/#navigation for more info on
  Ionic pages and navigation.
-->
<ion-header>
    <ion-navbar color="primary">
      
      <ion-title>قسيمة تخفيض</ion-title>
      
      <ion-buttons end>
        <button ion-button menuToggle>
          <ion-icon name="menu"></ion-icon>
        </button>
      </ion-buttons>
    
    </ion-navbar>
  </ion-header>


<ion-content padding class="vertical-align-content">
  <div style=" width: 100%;" *ngIf="requestDone == 0"> 
    <ion-spinner style="position: relative; display: block; width: 28px; height: 28px; margin: 0 auto;"></ion-spinner>
  </div>
  <form (ngSubmit)="Submit()" [formGroup]="actionForm" *ngIf="requestDone == 2">
    <ion-grid>
      <ion-row>
        <ion-col col-12>
            <ion-item no-padding>
                <ion-input name="code" formControlName="code" [(ngModel)]="dataForm.code" type="text" placeholder="* كود قسيمة التخفيض"></ion-input>
            </ion-item>
        </ion-col>
        <ion-col margin-bottom margin-top col-12>
          <p>
          ادخل الكود واحصل علي تخفيض عند كل مرة تقوم فيها بعمل طلب جديد
          </p>
      </ion-col>
      </ion-row>
      <ion-row>
        <ion-col col-12 margin-top>
            <button ion-button round type="submit" [disabled]="actionForm.invalid" full>ادخال</button>
        </ion-col>
      </ion-row>
    </ion-grid>
  </form>

  <ion-grid *ngIf="requestDone == 1">
      <ion-col col-4 offset-4>
          <img src="assets/imgs/promo-code.png">
        </ion-col>
      <ion-col>
            <p style="font-size: 15px !important;" class="title">لديك
                خصم
                {{ lastCouponInfo?.label }} <p>
          <p style="font-size: 10px !important; color:#000;">
            قيمة الخصم
            <span style="font-size:16px !important;">{{ lastCouponInfo?.discount }}</span>
            
            %
            صالح للاستخدام حتي 
            <span style="font-size:16px !important;"> {{ lastCouponInfo?.pivot.used_no }}</span>
           
            مرات
            <span *ngIf="lastCouponInfo?.expires_at != null" style="font-size: 13px !important; color:#000;">
              ينتهي بتاريخ
              <span style="font-size:16px !important;">{{ lastCouponInfo?.expires_at }}</span>
              
            </span>
          </p>
      </ion-col>
  </ion-grid>
</ion-content>